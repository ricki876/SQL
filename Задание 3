/*В таблице fine увеличить в два раза сумму неоплаченных штрафов для отобранных на предыдущем шаге записей. 
Важно! Если в запросе используется несколько таблиц или запросов, включающих одинаковые поля, то применяется полное имя столбца, 
включающего название таблицы через символ «.». Например,  fine.name  и  query_in.name.*/

UPDATE fine, 
    (
     SELECT name, number_plate, violation
     FROM fine
     GROUP BY name, number_plate, violation
     HAVING count(*) >= 2
    ) query_in
SET sum_fine = 2 * sum_fine
WHERE fine.name = query_in.name AND fine.violation = query_in.violation AND fine.number_plate = query_in.number_plate AND date_payment IS NULL;
